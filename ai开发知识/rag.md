# rag是什么
**rag 检索增强生成 基于用户的输入从外部知识数据检索与查询相关的文本片段，然后作为上下文发送向ai提问**
# 工作流程
* 索引的创建 （**数据的收集和存储**）
1. 从不同的数据源收集原始文档
2. 清洗这些文档为一个标准的文档格式
3. 把标准化的长文档切割为适当大小的片段（**chunks**）
4. 使用Embedding 模型把文档切片转化为高维向量
5. 把相关的高维向量存储在向量数据库中
* 检索生成
1. 将用户的提问 清洗为一个标准的文档格式
2. 使用 Embedding 模型 转化为相关的向量
3. 查询向量数据库获取相关的向量数据
4. 将获取向量数据的信息组装为输入LLM的上下文
# 检索生成 的优化
## 召回
在查询向量数据库获取相关的向量数据 这个步骤中 向量数据库强调**速度和广度而非精确度**，只会尽可能的收集相关的数据集数量
## 粗查
对召回的数据进行初步的筛选，把返回的数量减少，提高返回数据集的质量
## 精排 和 Pank模型
对粗查的内容进行更加精确的排序，进一步提高返回数据集的质量

## 混合检索策略

